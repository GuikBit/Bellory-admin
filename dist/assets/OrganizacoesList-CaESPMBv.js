import{c as P,b as I,r as a,j as e,B as g,i as L,U as T,C as V}from"./index-DUsq_Riq.js";import{u as M}from"./useOrganizacoes-E7QCFl7S.js";import{a as h,T as O}from"./Card-BR_6SfcG.js";import{I as U}from"./Input-Bfmmt56r.js";import{B as u}from"./Badge-CxxU2TNm.js";import{B as $}from"./Button-BTmVmhXi.js";import{E as A,S as K}from"./EmptyState-CpDH4SyR.js";import{f as C,b as F}from"./format-EFLfV7xb.js";import{F as R}from"./funnel-ORKn1Ux1.js";const _=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],j=P("arrow-up-down",_),w={gratuito:"default",basico:"info",plus:"plan",premium:"success"};function ee(){const{data:f,isLoading:b,error:y}=M(),v=I(),[r,B]=a.useState(""),[o,E]=a.useState("all"),[c,z]=a.useState("all"),[d,S]=a.useState("nomeFantasia"),[x,N]=a.useState("asc"),[k,D]=a.useState(!1),m=a.useMemo(()=>{if(!f)return[];let t=[...f];if(r){const s=r.toLowerCase();t=t.filter(i=>i.nomeFantasia.toLowerCase().includes(s)||i.cnpj.includes(s)||i.emailPrincipal.toLowerCase().includes(s))}return o==="ativo"&&(t=t.filter(s=>s.ativo)),o==="inativo"&&(t=t.filter(s=>!s.ativo)),c!=="all"&&(t=t.filter(s=>s.planoCodigo===c)),t.sort((s,i)=>{const l=s[d],n=i[d];return typeof l=="string"&&typeof n=="string"?x==="asc"?l.localeCompare(n):n.localeCompare(l):x==="asc"?l-n:n-l}),t},[f,r,o,c,d,x]),p=t=>{d===t?N(x==="asc"?"desc":"asc"):(S(t),N("asc"))};return y?e.jsx(A,{icon:e.jsx(g,{size:48}),title:"Erro ao carregar",description:"Não foi possível carregar as organizações."}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx(U,{placeholder:"Buscar por nome, CNPJ ou email...",value:r,onChange:t=>B(t.target.value),leftIcon:e.jsx(K,{size:18})})}),e.jsx($,{variant:"outline",onClick:()=>D(!k),leftIcon:e.jsx(R,{size:16}),children:"Filtros"})]}),k&&e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-[#6b5d57] dark:text-[#B8AEA4] mb-1",children:"Status"}),e.jsxs("select",{value:o,onChange:t=>E(t.target.value),className:"h-9 px-3 rounded-lg border border-[#d8ccc4] dark:border-[#2D2925] bg-white dark:bg-[#1A1715] text-[#2a2420] dark:text-[#F5F0EB] text-sm focus:outline-none focus:border-[#db6f57] dark:focus:border-[#E07A62]",children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"ativo",children:"Ativos"}),e.jsx("option",{value:"inativo",children:"Inativos"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-[#6b5d57] dark:text-[#B8AEA4] mb-1",children:"Plano"}),e.jsxs("select",{value:c,onChange:t=>z(t.target.value),className:"h-9 px-3 rounded-lg border border-[#d8ccc4] dark:border-[#2D2925] bg-white dark:bg-[#1A1715] text-[#2a2420] dark:text-[#F5F0EB] text-sm focus:outline-none focus:border-[#db6f57] dark:focus:border-[#E07A62]",children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"gratuito",children:"Gratuito"}),e.jsx("option",{value:"basico",children:"Básico"}),e.jsx("option",{value:"plus",children:"Plus"}),e.jsx("option",{value:"premium",children:"Premium"})]})]})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("p",{className:"text-sm text-[#6b5d57] dark:text-[#7A716A]",children:b?"Carregando...":`${m.length} organizações encontradas`})}),b?e.jsx(h,{className:"p-6",children:e.jsx(O,{rows:8})}):m.length===0?e.jsx(A,{icon:e.jsx(g,{size:48}),title:"Nenhuma organização",description:r?"Nenhum resultado para sua busca.":"Nenhuma organização cadastrada."}):e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"hidden lg:block overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-[#d8ccc4] dark:border-[#2D2925]",children:[e.jsx("th",{className:"text-left px-4 py-3",children:e.jsxs("button",{onClick:()=>p("nomeFantasia"),className:"flex items-center gap-1 text-xs font-semibold uppercase tracking-wider text-[#6b5d57] dark:text-[#7A716A] hover:text-[#2a2420] dark:hover:text-[#F5F0EB]",children:["Organização ",e.jsx(j,{size:12})]})}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold uppercase tracking-wider text-[#6b5d57] dark:text-[#7A716A]",children:"Status"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold uppercase tracking-wider text-[#6b5d57] dark:text-[#7A716A]",children:"Plano"}),e.jsx("th",{className:"text-center px-4 py-3",children:e.jsxs("button",{onClick:()=>p("totalClientes"),className:"flex items-center gap-1 text-xs font-semibold uppercase tracking-wider text-[#6b5d57] dark:text-[#7A716A] hover:text-[#2a2420] dark:hover:text-[#F5F0EB] mx-auto",children:["Clientes ",e.jsx(j,{size:12})]})}),e.jsx("th",{className:"text-center px-4 py-3",children:e.jsxs("button",{onClick:()=>p("totalAgendamentos"),className:"flex items-center gap-1 text-xs font-semibold uppercase tracking-wider text-[#6b5d57] dark:text-[#7A716A] hover:text-[#2a2420] dark:hover:text-[#F5F0EB] mx-auto",children:["Agendamentos ",e.jsx(j,{size:12})]})}),e.jsx("th",{className:"text-left px-4 py-3",children:e.jsxs("button",{onClick:()=>p("dtCadastro"),className:"flex items-center gap-1 text-xs font-semibold uppercase tracking-wider text-[#6b5d57] dark:text-[#7A716A] hover:text-[#2a2420] dark:hover:text-[#F5F0EB]",children:["Cadastro ",e.jsx(j,{size:12})]})}),e.jsx("th",{className:"w-10"})]})}),e.jsx("tbody",{children:m.map(t=>e.jsxs("tr",{onClick:()=>v(`/organizacoes/${t.id}`),className:"border-b border-[#d8ccc4]/50 dark:border-[#2D2925]/50 hover:bg-[#faf8f6] dark:hover:bg-[#2D2925]/30 cursor-pointer transition-colors",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-[#2a2420] dark:text-[#F5F0EB]",children:t.nomeFantasia}),e.jsx("p",{className:"text-xs text-[#6b5d57] dark:text-[#7A716A]",children:t.emailPrincipal})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(u,{variant:t.ativo?"success":"danger",children:t.ativo?"Ativo":"Inativo"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(u,{variant:w[t.planoCodigo]||"default",children:t.planoNome})}),e.jsx("td",{className:"px-4 py-3 text-center text-sm text-[#2a2420] dark:text-[#F5F0EB]",children:C(t.totalClientes)}),e.jsx("td",{className:"px-4 py-3 text-center text-sm text-[#2a2420] dark:text-[#F5F0EB]",children:C(t.totalAgendamentos)}),e.jsx("td",{className:"px-4 py-3 text-sm text-[#6b5d57] dark:text-[#B8AEA4]",children:F(t.dtCadastro)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(L,{size:16,className:"text-[#d8ccc4] dark:text-[#2D2925]"})})]},t.id))})]})})}),e.jsx("div",{className:"lg:hidden space-y-3",children:m.map(t=>e.jsxs(h,{hover:!0,className:"p-4 cursor-pointer",onClick:()=>v(`/organizacoes/${t.id}`),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-[#2a2420] dark:text-[#F5F0EB]",children:t.nomeFantasia}),e.jsx("p",{className:"text-xs text-[#6b5d57] dark:text-[#7A716A]",children:t.emailPrincipal})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{variant:t.ativo?"success":"danger",children:t.ativo?"Ativo":"Inativo"}),e.jsx(u,{variant:w[t.planoCodigo]||"default",children:t.planoNome})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-[#6b5d57] dark:text-[#B8AEA4]",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(T,{size:12})," ",t.totalClientes]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(V,{size:12})," ",t.totalAgendamentos]}),e.jsx("span",{children:F(t.dtCadastro)})]})]},t.id))})]})]})}export{ee as OrganizacoesList};
